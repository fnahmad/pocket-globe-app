(this["webpackJsonppocket-globe-app"]=this["webpackJsonppocket-globe-app"]||[]).push([[0],{139:function(e,t,a){e.exports=a(167)},167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=a(6),l=a(8),s=a(192),u=a(23),m=a(194),d=a(195),p=a(169),f=Object(s.a)((function(e){var t,a=e.breakpoints,n=e.spacing;return t={container:Object(l.a)({height:"100vh",display:"grid",gridTemplateRows:"auto 1fr",gridTemplateColumns:"4fr 6fr"},a.down("sm"),{height:"auto",display:"flex",flexDirection:"column"}),leftColumn:{padding:n(2),paddingRight:n(1),display:"flex",flexDirection:"column",justifyContent:"space-between"},rightColumn:{padding:n(2),paddingLeft:n(1),overflowY:"scroll",overflowX:"hidden"}},Object(l.a)(t,a.down("sm"),{leftColumn:{padding:n(2)},rightColumn:{padding:n(2)}}),Object(l.a)(t,a.only("xs"),{rightColumn:{paddingTop:0}}),t})),b=function(e){var t=e.navbar,a=e.leftColumn,n=e.rightColumn,o=e.footer,i=f(),c=Object(u.a)().breakpoints,l=Object(m.a)(c.down("sm"));return r.a.createElement(d.a,{maxWidth:!1,disableGutters:!0},r.a.createElement(p.a,{className:i.container},t,r.a.createElement("div",{className:i.leftColumn},a,!l&&o),r.a.createElement("div",{className:i.rightColumn},n),l&&o))},h=a(14),g=a(197),j=a(198),v=a(199),O=a(200),E=a(201),y=a(196),k=Object(s.a)({container:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}),w=function(e){var t=e.height,a=k();return r.a.createElement("div",{className:a.container,style:t?{height:t}:null},r.a.createElement(y.a,null))},C=a(21),x=a.n(C),N=a(87),S=a(88),L=a.n(S),T=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(null),i=Object(c.a)(o,2),l=i[0],s=i[1],u=Object(n.useState)(null),m=Object(c.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),b=Object(c.a)(f,2),h=b[0],g=b[1],j=Object(n.useState)(!1),v=Object(c.a)(j,2),O=v[0],E=v[1];return Object(n.useEffect)((function(){(function(){var e=Object(N.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!1),g(!0),e.prev=2,e.next=5,L.a.get(l,d);case 5:t=e.sent,r(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),E(e.t0);case 12:g(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}})()()}),[l,d]),[{data:a,isLoading:h,isError:O},{setUrl:s,setConfig:p}]},A={"& tr:last-child":{"& th, td":{border:0}}},R={marginBottom:10},_=Object(s.a)((function(e){var t,a=e.breakpoints;return{container:(t={},Object(l.a)(t,a.only("xs"),R),Object(l.a)(t,a.only("sm"),A),Object(l.a)(t,a.only("md"),R),Object(l.a)(t,a.up("lg"),A),t)}})),z=function(e){var t=e.alphaCode,a=_(),o=T(),i=Object(c.a)(o,2),l=i[0],s=l.data,u=l.isLoading,m=i[1].setUrl;if(Object(n.useEffect)((function(){m("https://restcountries.eu/rest/v2/alpha/".concat(t))}),[t,m]),!s||u)return r.a.createElement(w,null);var d=s.capital,p=s.currencies,f=s.population,b=s.area,y=s.languages,k=[{label:"Capital",value:d},{label:"Population",value:Object(h.b)(",d")(f)},{label:"Area",value:Object(h.b)(",d")(b)},{label:"Languages",value:y.slice(0,5).map((function(e){return e.name})).join(", ")},{label:"Currency",value:p[0].name}];return r.a.createElement(g.a,{className:a.container},r.a.createElement(j.a,{size:"small"},r.a.createElement(v.a,null,k.map((function(e){var t=e.label,a=e.value;return r.a.createElement(O.a,{key:t,hover:!0},r.a.createElement(E.a,{component:"th",variant:"head"},t),r.a.createElement(E.a,null,"Area"===t?r.a.createElement(r.a.Fragment,null,a," km",r.a.createElement("sup",null,"2")):a))})))))},M=a(52),I={display:"grid",gridTemplateColumns:"5.5fr 4.5fr",columnGap:10},G={display:"flex",flexDirection:"column-reverse"},P=Object(s.a)((function(e){var t,a=e.breakpoints;return{infoBox:Object(M.a)(Object(M.a)({},I),{},(t={},Object(l.a)(t,a.down("md"),G),Object(l.a)(t,a.down("sm"),I),Object(l.a)(t,a.down("xs"),G),t))}})),B=function(e){var t=e.children,a=P();return r.a.createElement("div",{className:a.infoBox},t)},D=Object(s.a)({container:{gridRowEnd:function(e){return"span ".concat(e)}},img:{width:"100%",cursor:"pointer"}}),U=Object(n.memo)((function(e){var t=e.photo,a=e.onClick,o=Object(n.useRef)(),i=Object(n.useState)(0),l=Object(c.a)(i,2),s=l[0],u=l[1],m=D(s);if(Object(n.useEffect)((function(){if(t){var e=function(){var e=o.current.clientHeight;u(Math.ceil(e/10+1))},a=o.current;return a.addEventListener("load",e),window.addEventListener("resize",e),function(){a.removeEventListener("load",e),window.removeEventListener("resize",e)}}}),[t]),!t)return r.a.createElement(w,null);var d=t.urls,p=t.alt_description;return r.a.createElement("div",{className:m.container},r.a.createElement("img",{className:m.img,ref:o,src:d.small,alt:p,onClick:a}))})),W=a(92),Y=a(213),Z=a(216),q=a(203),F=Object(s.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},div:{outline:"none",boxShadow:e.shadows[5]}}})),H=function(e){var t=e.inZoom,a=e.children,n=Object(W.a)(e,["inZoom","children"]),o=F();return r.a.createElement(Y.a,Object.assign({className:o.modal,closeAfterTransition:!0,BackdropComponent:Z.a,BackdropProps:{timeout:500}},n),r.a.createElement(q.a,{in:t},r.a.createElement("div",{className:o.div},a)))},K=a(170),J=a(204),X="?utm_source=your_app_name&utm_medium=referral",Q=Object(s.a)((function(e){var t=e.breakpoints;return Object(l.a)({figure:{margin:"0 auto",padding:25,backgroundColor:"white",outline:"none",height:"85vh"},img:{height:"100%"}},t.down("sm"),{figure:{height:"auto",width:"95vw"},img:{height:"auto",width:"100%"}})})),V=function(e){var t=e.photo,a=Q(),n=t.urls,o=t.description,i=t.links,c=t.user.name;return r.a.createElement("figure",{className:a.figure},r.a.createElement("img",{className:a.img,src:n.regular,alt:o}),r.a.createElement("figcaption",null,r.a.createElement(K.a,{variant:"caption",display:"block",align:"center"},"by"," ",r.a.createElement(J.a,{href:i.html+X},c)," on"," ",r.a.createElement(J.a,{href:"https://unsplash.com/".concat(X)},"Unsplash"))))},$=Object(s.a)({container:{width:"100%",paddingTop:10,display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gridAutoRows:10,gridGap:"0 10px"},figure:{margin:"0 auto",padding:25,backgroundColor:"white",outline:"none",height:"85vh"},img:{height:"100%"}}),ee=Object(n.memo)((function(e){var t=e.term,a=$(),o=T(),i=Object(c.a)(o,2),l=i[0],s=l.data,u=l.isLoading,m=i[1],d=m.setUrl,p=m.setConfig,f=Object(n.useState)(!1),b=Object(c.a)(f,2),h=b[0],g=b[1],j=Object(n.useState)(1),v=Object(c.a)(j,2),O=v[0],E=v[1];if(Object(n.useEffect)((function(){d("https://api.unsplash.com/search/photos/"),p({params:{query:t,per_page:12},headers:{Authorization:"Client-ID ".concat("7rCK1Jg2qKE_onqKKwaqs04MT_sYcYFwbEwCNteOEQw")}})}),[t,d,p]),!s||u)return r.a.createElement(w,{height:300});var y=s.results,k=y[O];return r.a.createElement("div",{className:a.container},y&&y.map((function(e,t){return r.a.createElement(U,{key:e.id,onClick:function(){return E(t),void g(!0)},photo:e})})),r.a.createElement(H,{open:h,inZoom:h,onClose:function(){return g(!1)}},r.a.createElement(V,{photo:k})))})),te=function(e){var t=e.term,a=T(),o=Object(c.a)(a,2),i=o[0],l=i.data,s=i.isLoading,u=o[1].setUrl;if(Object(n.useEffect)((function(){u("https://en.wikipedia.org/api/rest_v1/page/summary/".concat(t))}),[t,u]),s||!l)return r.a.createElement(w,null);for(var m=l.extract;m.length>=480;)m=m.split(". ").slice(0,-1).join(". ")+".";return r.a.createElement("div",{className:"WikiEntry"},r.a.createElement(K.a,{variont:"body2",align:"justify"},m))},ae=Object(n.memo)((function(e){var t=e.countryProps,a=t.name,n=t.alphaCode;return r.a.createElement("div",null,r.a.createElement(B,null,r.a.createElement(te,{term:a}),r.a.createElement(z,{alphaCode:n})),r.a.createElement(ee,{term:a,columns:3}))})),ne=a(90),re={high:"https://unpkg.com/world-atlas@2.0.2/countries-50m.json",low:"https://unpkg.com/world-atlas@2.0.2/countries-110m.json"},oe=Object(s.a)({tooltip:{position:"absolute",padding:5,borderRadius:6,color:"#fff",backgroundColor:"rgba(0,0,0, .8)",textAlign:"center",pointerEvents:"none",transform:"translate(-50%, 0)",zIndex:"1"}}),ie=Object(n.forwardRef)((function(e,t){var a=oe();return r.a.createElement("div",{className:a.tooltip,ref:t})})),ce=Object(s.a)((function(e){var t=e.palette,a=t.primary,n=t.background,r=t.getContrastText;return{svg:{display:"block",margin:"0 auto"},country:{fill:n.default,stroke:r(n.default),transition:"fill .5s",strokeWidth:.25,"&:hover":{fill:a.main}},selected:{fill:a.light},circle:{fill:r(n.default),transition:"fill .5s"}}})),le=Object(n.memo)((function(e){var t=e.defaultSize,a=void 0===t?600:t,o=e.sensitivity,i=void 0===o?75:o,l=e.initialAlphaCode,s=e.onCountryClick,m=ce(),d=Object(u.a)(),p=d.breakpoints,f=d.spacing,b=function(){var e=Object(n.useState)(window.innerWidth),t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(n.useLayoutEffect)((function(){var e=function(){r(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),a}(),g=2*f(2),j=b>p.values.sm+g?a:b-g,v=j,O=j,E=Object(n.useRef)(null),y=Object(n.useRef)(null),k=Object(n.useState)(l),C=Object(c.a)(k,2),x=C[0],N=C[1],S=Object(n.useMemo)((function(){return Object(h.c)().scale(250).center([0,0]).rotate([0,-30]).translate([v/2,O/2])}),[O,v]),L=S.scale(),T=Object(h.d)().projection(S),A=function(e){var t=e.resolution,a=Object(n.useState)(null),r=Object(c.a)(a,2),o=r[0],i=r[1],l=Object(n.useState)(!1),s=Object(c.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(c.a)(d,2),f=p[0],b=p[1];return Object(n.useEffect)((function(){m(!0),Promise.all([Object(h.f)(re[t]),Object(h.f)("https://gist.githubusercontent.com/sitek94/4339d86883340aac67cf61a5ed7bb05e/raw/ISO-3166-Countries-with-Regional-Codes.json")]).then((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1],r=Object(ne.a)(a,a.objects.countries);r.features.forEach((function(e){if(e.id){var t=n.find((function(t){return t["country-code"]===e.id}));e.properties={name:t.name,alphaCode:t["alpha-3"],numericCode:t["country-code"]}}})),i(r)})).catch(b),m(!1)}),[t]),[{data:o,isLoading:u,isError:f}]}({resolution:"low"}),R=Object(c.a)(A,1)[0],_=R.data,z=R.isLoading;return Object(n.useEffect)((function(){if(_){var e=Object(h.g)(E.current),t=Object(h.g)(y.current),a=e.select("circle"),n=e.selectAll("path");e.call(function(e){var t=e.selection,a=e.projection,n=e.path,r=e.sensitivity;return Object(h.a)().on("drag",(function(e){var o=a.rotate(),i=r/a.scale();a.rotate([o[0]+e.dx*i,o[1]-e.dy*i]),n.projection(a),t.attr("d",n)}))}({selection:n,path:T,projection:S,sensitivity:i})).call(function(e){var t=e.selection,a=e.projection,n=e.path,r=e.initialScale,o=e.circle,i=e.maxZoom,c=void 0===i?20:i,l=e.minZoom,s=void 0===l?.3:l;return Object(h.h)().on("zoom",(function(e){var i=e.transform.k;i>=c&&(e.transform.k=c),i<=s?e.transform.k=s:(a.scale(r*e.transform.k),n.projection(a),t.attr("d",n),o.attr("r",a.scale()))}))}({selection:n,path:T,projection:S,circle:a,initialScale:L}));var r=function(e){if(e){var t=e.style("opacity",0);return{handleMouseover:function(e,a){var n=a.properties.name;t.transition().duration(900).style("opacity",.9),t.html(n);var r=e.pageX,o=e.pageY,i=document.body,c=i.scrollLeft+i.offsetLeft;t.style("left",r+c+"px").style("top",o+-70+"px")},handleMouseout:function(){t.transition().duration(500).style("opacity",0)}}}}(t),o=r.handleMouseover,l=r.handleMouseout;n.data(_.features).join("path").attr("d",T).on("click",(function(e,t){var a=S.rotate(),r=T.centroid(t),o=S.invert(r),i=Object(c.a)(o,2),l=i[0],u=i[1];S.rotate([-l,-u]),T.projection(S);var m=S.rotate(),d=Object(h.e)(a,m);n.transition().attrTween("d",(function(e){return function(t){S.rotate(d(Math.pow(t,.33))),T.projection(S);var a=T(e);return null!==a?a:""}})).duration(1e3),s(t.properties),N(t.properties.alphaCode)})).on("mouseover",o).on("mouseout",l)}}),[_,T,S,L,i,s,m]),!_||z?r.a.createElement(w,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("svg",{ref:E,className:m.svg,width:v,height:O},r.a.createElement("circle",{className:m.circle,cx:v/2,cy:O/2,r:250}),r.a.createElement("g",null,_.features.map((function(e){var t=e.properties,a=t.name,n=t.alphaCode;return r.a.createElement("path",{key:a,id:n,className:"".concat(m.country," ").concat(x===n&&m.selected)})})))),r.a.createElement(ie,{ref:y}))})),se=a(214),ue=a(215),me=a(209),de=a(210),pe=a(205),fe=a(206),be=a(207),he=a(208),ge=Object(s.a)((function(e){var t=e.palette,a=e.breakpoints;e.spacing;return{root:{flexGrow:1,gridColumn:"1 / span 2",color:t.text.primary,backgroundColor:t.background.default},toolbar:{},title:Object(l.a)({left:0,position:"absolute",width:"100%",textAlign:"center"},a.only("xs"),{position:"static",textAlign:"left"}),pushToRight:{marginLeft:"auto"}}})),je=function(e){var t=e.title,a=e.onThemeIconClick,n=ge(),o=Object(u.a)(),i=o.palette.type,c=o.breakpoints,l=Object(m.a)(c.up("sm")),s=Object(m.a)(c.down("xs")),d=Object(m.a)("(max-width:".concat(c.values.mobile,"px)")),p=r.a.createElement(se.a,{edge:"start"},r.a.createElement(pe.a,{fontSize:"large"})),f=r.a.createElement(ue.a,{title:"GitHub repository","aria-label":"GitHub repository"},r.a.createElement(se.a,{className:n.pushToRight,component:"a",edge:"end",color:"inherit","aria-label":"GitHub repository",href:"https://github.com/sitek94/pocket-globe-app",target:"_blank",rel:"noopener"},r.a.createElement(fe.a,null))),b=r.a.createElement(ue.a,{title:"Toggle light/dark theme","aria-label":"Toggle light/dark theme"},r.a.createElement(se.a,{edge:"end",color:"inherit","aria-label":"Toggle light/dark theme",onClick:a},"light"===i?r.a.createElement(be.a,null):r.a.createElement(he.a,null))),h="h4";return s&&(h="h5"),d&&(h="h6"),r.a.createElement(me.a,{className:n.root,position:"static"},r.a.createElement(de.a,{className:n.toolbar},l&&p,r.a.createElement(K.a,{className:n.title,variant:h},t),f,b))},ve=Object(s.a)((function(e){var t=e.breakpoints,a=e.spacing;return{footer:Object(l.a)({},t.down("sm"),{padding:a(1),textAlign:"center"})}})),Oe=Object(n.memo)((function(){var e=ve(),t=(new Date).getFullYear(),a=r.a.createElement(J.a,{href:"https://github.com/sitek94",target:"_blank",variant:"body2",rel:"noopener"},"Maciek Sitkowski");return r.a.createElement("footer",{className:e.footer},r.a.createElement(K.a,null,"\xa9 ",t," by ",a))})),Ee=a(91),ye=a(211),ke=a(212),we={name:"Poland",alphaCode:"POL"},Ce=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],o=t[1],i=Object(Ee.a)({palette:{type:a?"dark":"light",primary:{main:"#1976d2"}},breakpoints:{values:{xs:0,mobile:400,sm:600,md:960,lg:1280,xl:1920}}}),l=Object(n.useState)(we),s=Object(c.a)(l,2),u=s[0],m=s[1];return r.a.createElement(ye.a,{theme:i},r.a.createElement(ke.a,null),r.a.createElement(b,{navbar:r.a.createElement(je,{title:u.name,onThemeIconClick:function(){return o(!a)}}),leftColumn:r.a.createElement(le,{initialAlphaCode:we.alphaCode,onCountryClick:m}),rightColumn:r.a.createElement(ae,{countryProps:u}),footer:r.a.createElement(Oe,null)}))};i.a.render(r.a.createElement(Ce,null),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.6718f10d.chunk.js.map