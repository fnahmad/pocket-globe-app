(this["webpackJsonppocket-globe-app"]=this["webpackJsonppocket-globe-app"]||[]).push([[0],{137:function(e,t,a){e.exports=a(165)},165:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),l=a(7),i=a(189),u=a(166),s=Object(i.a)({container:{height:"100vh",display:"grid",gridTemplateRows:"auto 1fr",gridTemplateColumns:"4fr 6fr"},leftColumn:{padding:15,paddingRight:10,display:"flex",flexDirection:"column",justifyContent:"space-between"},rightColumn:{padding:15,paddingLeft:10,overflowY:"scroll",overflowX:"hidden"}}),m=function(e){var t=e.navbar,a=e.leftColumn,n=e.rightColumn,o=e.footer,c=s();return r.a.createElement(u.a,{className:c.container},t,r.a.createElement("div",{className:c.leftColumn},a,o),r.a.createElement("div",{className:c.rightColumn},n))},d=a(12),p=a(193),f=a(194),h=a(195),b=a(196),g=a(197),v=a(192),j=Object(i.a)({container:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}),E=function(e){var t=e.height,a=j();return r.a.createElement("div",{className:a.container,style:t?{height:t}:null},r.a.createElement(v.a,null))},O=a(20),y=a.n(O),k=a(84),C=a(85),w=a.n(C),x=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(null),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(n.useState)(null),m=Object(l.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(!1),h=Object(l.a)(f,2),b=h[0],g=h[1],v=Object(n.useState)(!1),j=Object(l.a)(v,2),E=j[0],O=j[1];return Object(n.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!1),g(!0),e.prev=2,e.next=5,w.a.get(i,d);case 5:t=e.sent,r(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),O(e.t0);case 12:g(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}})()()}),[i,d]),[{data:a,isLoading:b,isError:E},{setUrl:u,setConfig:p}]},N=Object(i.a)({root:{"tr:last-child":{"th, td":{border:0}},th:{width:"35%"}}}),S=function(e){var t=e.alphaCode,a=N(),o=x(),c=Object(l.a)(o,2),i=c[0],u=i.data,s=i.isLoading,m=c[1].setUrl;if(Object(n.useEffect)((function(){m("https://restcountries.eu/rest/v2/alpha/".concat(t))}),[t,m]),!u||s)return r.a.createElement(E,null);var v=u.capital,j=u.currencies,O=u.population,y=u.area,k=u.languages,C=[{label:"Capital",value:v},{label:"Population",value:Object(d.b)(",d")(O)},{label:"Area",value:Object(d.b)(",d")(y)},{label:"Languages",value:k.slice(0,5).map((function(e){return e.name})).join(", ")},{label:"Currency",value:j[0].name}];return r.a.createElement(p.a,{className:a.root},r.a.createElement(f.a,{size:"small"},r.a.createElement(h.a,null,C.map((function(e){var t=e.label,a=e.value;return r.a.createElement(b.a,{key:t,hover:!0},r.a.createElement(g.a,{component:"th",variant:"head"},t),r.a.createElement(g.a,null,"Area"===t?r.a.createElement(r.a.Fragment,null,a," km",r.a.createElement("sup",null,"2")):a))})))))},T=Object(i.a)({container:{gridRowEnd:function(e){return"span ".concat(e)}},img:{width:"100%",cursor:"pointer"}}),L=Object(n.memo)((function(e){var t=e.photo,a=e.onClick,o=Object(n.useRef)(),c=Object(n.useState)(0),i=Object(l.a)(c,2),u=i[0],s=i[1],m=T(u);if(Object(n.useEffect)((function(){if(t){var e=function(){var e=o.current.clientHeight;s(Math.ceil(e/10+1))},a=o.current;return a.addEventListener("load",e),function(){a.removeEventListener("load",e)}}}),[t]),!t)return r.a.createElement(E,null);var d=t.urls,p=t.alt_description;return r.a.createElement("div",{className:m.container},r.a.createElement("img",{className:m.img,ref:o,src:d.small,alt:p,onClick:a}))})),_=a(89),A=a(209),R=a(212),M=a(199),I=Object(i.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},div:{outline:"none",boxShadow:e.shadows[5]}}})),P=function(e){var t=e.inZoom,a=e.children,n=Object(_.a)(e,["inZoom","children"]),o=I();return r.a.createElement(A.a,Object.assign({className:o.modal,closeAfterTransition:!0,BackdropComponent:R.a,BackdropProps:{timeout:500}},n),r.a.createElement(M.a,{in:t},r.a.createElement("div",{className:o.div},a)))},z=a(167),B=a(200),G="?utm_source=your_app_name&utm_medium=referral",U=Object(i.a)({figure:{margin:"0 auto",padding:25,backgroundColor:"white",outline:"none",height:"85vh"},img:{height:"100%"},source:{}}),Y=function(e){var t=e.photo,a=U(),n=t.urls,o=t.description,c=t.links,l=t.user.name;return r.a.createElement("figure",{className:a.figure},r.a.createElement("img",{className:a.img,src:n.regular,alt:o}),r.a.createElement("figcaption",null,r.a.createElement(z.a,{variant:"caption",display:"block",align:"center"},"by"," ",r.a.createElement(B.a,{href:c.html+G},l)," on"," ",r.a.createElement(B.a,{href:"https://unsplash.com/".concat(G)},"Unsplash"))))},Z=Object(i.a)({container:{width:"100%",paddingTop:10,display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gridAutoRows:10,gridGap:"0 10px"},figure:{margin:"0 auto",padding:25,backgroundColor:"white",outline:"none",height:"85vh"},img:{height:"100%"}}),q=Object(n.memo)((function(e){var t=e.term,a=Z(),o=x(),c=Object(l.a)(o,2),i=c[0],u=i.data,s=i.isLoading,m=c[1],d=m.setUrl,p=m.setConfig,f=Object(n.useState)(!1),h=Object(l.a)(f,2),b=h[0],g=h[1],v=Object(n.useState)(1),j=Object(l.a)(v,2),O=j[0],y=j[1];if(Object(n.useEffect)((function(){d("https://api.unsplash.com/search/photos/"),p({params:{query:t,per_page:12},headers:{Authorization:"Client-ID ".concat("7rCK1Jg2qKE_onqKKwaqs04MT_sYcYFwbEwCNteOEQw")}})}),[t,d,p]),!u||s)return r.a.createElement(E,{height:300});var k=u.results,C=k[O];return r.a.createElement("div",{className:a.container},k&&k.map((function(e,t){return r.a.createElement(L,{key:e.id,onClick:function(){return y(t),void g(!0)},photo:e})})),r.a.createElement(P,{open:b,inZoom:b,onClose:function(){return g(!1)}},r.a.createElement(Y,{photo:C})))})),F=function(e){var t=e.term,a=x(),o=Object(l.a)(a,2),c=o[0],i=c.data,u=c.isLoading,s=o[1].setUrl;if(Object(n.useEffect)((function(){s("https://en.wikipedia.org/api/rest_v1/page/summary/".concat(t))}),[t,s]),u||!i)return r.a.createElement(E,null);for(var m=i.extract;m.length>=480;)m=m.split(". ").slice(0,-1).join(". ")+".";return r.a.createElement("div",{className:"WikiEntry"},r.a.createElement(z.a,{variont:"body2",align:"justify"},m))},H=Object(i.a)({infoBox:{height:"200",display:"grid",gridTemplateColumns:"5.5fr 4.5fr",columnGap:10}}),K=Object(n.memo)((function(e){var t=e.countryProps,a=t.name,n=t.alphaCode,o=H();return r.a.createElement("div",null,r.a.createElement("div",{className:o.infoBox},r.a.createElement(F,{term:a}),r.a.createElement(S,{alphaCode:n})),r.a.createElement(q,{term:a,columns:3}))})),D=a(87),J={high:"https://unpkg.com/world-atlas@2.0.2/countries-50m.json",low:"https://unpkg.com/world-atlas@2.0.2/countries-110m.json"},W=Object(i.a)({tooltip:{position:"absolute",padding:5,borderRadius:6,color:"#fff",backgroundColor:"rgba(0,0,0, .8)",textAlign:"center",pointerEvents:"none",transform:"translate(-50%, 0)",zIndex:"1"}}),X=Object(n.forwardRef)((function(e,t){var a=W();return r.a.createElement("div",{className:a.tooltip,ref:t})})),Q=Object(i.a)((function(e){var t=e.palette,a=t.primary,n=t.background,r=t.getContrastText;return{svg:{display:"block",margin:"0 auto"},country:{fill:n.default,stroke:r(n.default),transition:"fill .5s",strokeWidth:.25,"&:hover":{fill:a.main}},selected:{fill:a.light},circle:{fill:r(n.default),transition:"fill .5s"}}})),V=Object(n.memo)((function(e){var t=e.width,a=void 0===t?600:t,o=e.height,c=void 0===o?600:o,i=e.sensitivity,u=void 0===i?75:i,s=e.initialAlphaCode,m=e.onCountryClick,p=Q(),f=Object(n.useRef)(null),h=Object(n.useRef)(null),b=Object(n.useState)(s),g=Object(l.a)(b,2),v=g[0],j=g[1],O=Object(n.useMemo)((function(){return Object(d.c)().scale(250).center([0,0]).rotate([0,-30]).translate([a/2,c/2])}),[c,a]),y=O.scale(),k=Object(d.d)().projection(O),C=function(e){var t=e.resolution,a=Object(n.useState)(null),r=Object(l.a)(a,2),o=r[0],c=r[1],i=Object(n.useState)(!1),u=Object(l.a)(i,2),s=u[0],m=u[1],p=Object(n.useState)(!1),f=Object(l.a)(p,2),h=f[0],b=f[1];return Object(n.useEffect)((function(){m(!0),Promise.all([Object(d.f)(J[t]),Object(d.f)("https://gist.githubusercontent.com/sitek94/4339d86883340aac67cf61a5ed7bb05e/raw/ISO-3166-Countries-with-Regional-Codes.json")]).then((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(D.a)(a,a.objects.countries);r.features.forEach((function(e){if(e.id){var t=n.find((function(t){return t["country-code"]===e.id}));e.properties={name:t.name,alphaCode:t["alpha-3"],numericCode:t["country-code"]}}})),c(r)})).catch(b),m(!1)}),[t]),[{data:o,isLoading:s,isError:h}]}({resolution:"low"}),w=Object(l.a)(C,1)[0],x=w.data,N=w.isLoading;return Object(n.useEffect)((function(){if(x){var e=Object(d.g)(f.current),t=Object(d.g)(h.current),a=e.select("circle"),n=e.selectAll("path");e.call(function(e){var t=e.selection,a=e.projection,n=e.path,r=e.sensitivity;return Object(d.a)().on("drag",(function(e){var o=a.rotate(),c=r/a.scale();a.rotate([o[0]+e.dx*c,o[1]-e.dy*c]),n.projection(a),t.attr("d",n)}))}({selection:n,path:k,projection:O,sensitivity:u})).call(function(e){var t=e.selection,a=e.projection,n=e.path,r=e.initialScale,o=e.circle,c=e.maxZoom,l=void 0===c?20:c,i=e.minZoom,u=void 0===i?.3:i;return Object(d.h)().on("zoom",(function(e){var c=e.transform.k;c>=l&&(e.transform.k=l),c<=u?e.transform.k=u:(a.scale(r*e.transform.k),n.projection(a),t.attr("d",n),o.attr("r",a.scale()))}))}({selection:n,path:k,projection:O,circle:a,initialScale:y}));var r=function(e){if(e){var t=e.style("opacity",0);return{handleMouseover:function(e,a){var n=a.properties.name;t.transition().duration(900).style("opacity",.9),t.html(n);var r=e.pageX,o=e.pageY,c=document.body,l=c.scrollLeft+c.offsetLeft;t.style("left",r+l+"px").style("top",o+-70+"px")},handleMouseout:function(){t.transition().duration(500).style("opacity",0)}}}}(t),o=r.handleMouseover,c=r.handleMouseout;n.data(x.features).join("path").attr("d",k).on("click",(function(e,t){var a=O.rotate(),r=k.centroid(t),o=O.invert(r),c=Object(l.a)(o,2),i=c[0],u=c[1];O.rotate([-i,-u]),k.projection(O);var s=O.rotate(),p=Object(d.e)(a,s);n.transition().attrTween("d",(function(e){return function(t){O.rotate(p(Math.pow(t,.33))),k.projection(O);var a=k(e);return null!==a?a:""}})).duration(1e3),m(t.properties),j(t.properties.alphaCode)})).on("mouseover",o).on("mouseout",c)}}),[x,k,O,y,u,m,p]),!x||N?r.a.createElement(E,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("svg",{ref:f,className:p.svg,width:a,height:c},r.a.createElement("circle",{className:p.circle,cx:a/2,cy:c/2,r:250}),r.a.createElement("g",null,x.features.map((function(e){var t=e.properties,a=t.name,n=t.alphaCode;return r.a.createElement("path",{key:a,id:n,className:"".concat(p.country," ").concat(v===n&&p.selected)})})))),r.a.createElement(X,{ref:h}))})),$=a(211),ee=a(210),te=a(204),ae=a(205),ne=a(201),re=a(202),oe=a(203),ce=a(206),le=a(22),ie=Object(i.a)((function(e){var t=e.palette;return{root:{gridColumn:"1 / span 2",color:t.text.primary,backgroundColor:t.background.default},toolbar:{display:"flex"},title:{flex:1,textAlign:"center"}}})),ue=function(e){var t=e.title,a=e.onThemeIconClick,n=Object(le.a)().palette.type,o=ie(),c=r.a.createElement($.a,{title:"GitHub repository","aria-label":"GitHub repository"},r.a.createElement(ee.a,{component:"a",edge:"end",color:"inherit","aria-label":"GitHub repository",href:"https://github.com/sitek94/pocket-globe-app",target:"_blank",rel:"noopener"},r.a.createElement(ne.a,null))),l=r.a.createElement($.a,{title:"Toggle light/dark theme","aria-label":"Toggle light/dark theme"},r.a.createElement(ee.a,{edge:"end",color:"inherit","aria-label":"Toggle light/dark theme",onClick:a},"light"===n?r.a.createElement(re.a,null):r.a.createElement(oe.a,null)));return r.a.createElement(te.a,{className:o.root,position:"static"},r.a.createElement(ae.a,{className:o.toolbar},r.a.createElement(ce.a,{fontSize:"large"}),r.a.createElement(z.a,{className:o.title,variant:"h4"},t),c,l))},se=Object(n.memo)((function(){var e=(new Date).getFullYear(),t=r.a.createElement(B.a,{href:"https://github.com/sitek94",target:"_blank",variant:"body2",rel:"noopener"},"Maciek Sitkowski");return r.a.createElement("footer",null,r.a.createElement(z.a,null,"\xa9 ",e," by ",t))})),me=a(88),de=a(207),pe=a(208),fe={name:"Poland",alphaCode:"POL"},he=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(me.a)({palette:{type:a?"dark":"light",primary:{main:"#1976d2"}}}),i=Object(n.useState)(fe),u=Object(l.a)(i,2),s=u[0],d=u[1];return r.a.createElement(de.a,{theme:c},r.a.createElement(pe.a,null),r.a.createElement(m,{navbar:r.a.createElement(ue,{title:s.name,onThemeIconClick:function(){return o(!a)}}),leftColumn:r.a.createElement(V,{initialAlphaCode:fe.alphaCode,onCountryClick:d}),rightColumn:r.a.createElement(K,{countryProps:s}),footer:r.a.createElement(se,null)}))};c.a.render(r.a.createElement(he,null),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.172282b1.chunk.js.map